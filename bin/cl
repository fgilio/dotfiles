#!/usr/bin/env zsh
# Claude Code wrapper - works in any shell context

if [ $# -eq 0 ]; then
    # Interactive: Opus for deeper reasoning
    exec claude --dangerously-skip-permissions --model opus
else
    # Non-interactive: Sonnet for speed, no session persistence for one-off queries
    # ANTHROPIC_API_KEY="" is intentional - workaround for Claude Code bug where
    # env API key causes issues in query mode. Forces use of stored credentials.
    # --tools default enables all tools (disabled by default in --print mode)
    # --dangerously-skip-permissions required for tools to actually execute in --print mode
    ANTHROPIC_API_KEY="" exec claude --print --output-format=text --tools default --dangerously-skip-permissions --no-session-persistence --model sonnet "$@"
fi