#!/usr/bin/env zsh
# Claude Code - safe mode (prompts for approval)

if [[ $# -eq 0 || "$1" == -* ]]; then
    # Interactive: no args, or flags (--resume, --continue, etc.)
    # NOTE: flags before a positional arg route here too (e.g. cls --verbose "query")
    exec claude --permission-mode default "$@"
else
    # Non-interactive: one-off query, pinned to Opus
    # ANTHROPIC_API_KEY="" forces CLI auth instead of env key, which bills to API
    # instead of Max subscription in --print mode (issues #3040, #1932)
    # Without bypass, tools requiring approval won't execute in --print mode
    ANTHROPIC_API_KEY="" exec claude --permission-mode default --print --output-format=text --tools default --no-session-persistence --model opus "$@"
fi
